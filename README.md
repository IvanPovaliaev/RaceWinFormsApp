# üèéÔ∏èRaceWinFormsApp
–ö–æ–ø–∏—è –∏–≥—Ä—ã ¬´Race¬ª (–æ—Ä–∏–≥–∏–Ω–∞–ª: [RaceGame](https://github.com/Fruktozec/RaceGame)), —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ Windows Forms, –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –û–û–ü, —Ä–∞–±–æ—Ç—ã —Å–æ –∑–≤—É–∫–æ–º, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ JSON.
<div " align="center">

![image](https://github.com/IvanPovaliaev/RaceWinFormsApp/assets/157638990/f5b3651e-7983-48f0-bdef-f5ba675bfc03)

</div>

## üìù–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

### üèÜ–¶–µ–ª—å –∏–≥—Ä—ã
–¶–µ–ª—å - –Ω–∞–±—Ä–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –æ—á–∫–æ–≤ –∏ –º–æ–Ω–µ—Ç.

### üìú–ü—Ä–∏–≤–∏–ª–∞ –∏–≥—Ä—ã
1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—à–∏–Ω–æ–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–µ–ª–æ–∫ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ:
    * –°—Ç—Ä–µ–ª–∫–∞–º–∏ `‚Üê` –∏ `‚Üí` –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –¥–≤–∏–∂–µ–Ω–∏–µ –º–∞—à–∏–Ω—ã `–Ω–∞–ª–µ–≤–æ` –∏ `–Ω–∞–ø—Ä–∞–≤–æ` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
    * –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ `‚Üë` —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –º–∞—à–∏–Ω—ã –∏–≥—Ä–æ–∫–∞ `—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è`;
    * –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ `‚Üì` —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –º–∞—à–∏–Ω—ã –∏–≥—Ä–æ–∫–∞ `—É–º–µ–Ω—å—à–∞–µ—Ç—Å—è` –≤–ø–ª–æ—Ç—å –¥–æ –ø–æ–ª–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏;
2.  –ü—Ä–∏ –≤—ã–µ–∑–¥–µ –∑–∞ –∫—Ä–∞–π –∫–∞—Ä—Ç—ã, –º–∞—à–∏–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.
3. –°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –º–∞—à–∏–Ω—ã –∏–≥—Ä–æ–∫–∞. –ü—Ä–∏ –ø–æ–ª–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –æ—á–∫–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –Ω–∞—á–∏—Å–ª—è—Ç—å—Å—è.
4. –ü—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å–æ –≤—Å—Ç—Ä–µ—á–Ω–æ–π –º–∞—à–∏–Ω–æ–π –≤–æ–∑–º–æ–∂–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
    * –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –∏–º–µ–µ—Ç—Å—è `15` –º–æ–Ω–µ—Ç, —Ç–æ –∏–º–µ–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å` –∏–≥—Ä—É, –∑–∞–ø–ª–∞—Ç–∏–≤ –¥–∞–Ω–Ω—É—é —Å—É–º–º—É;
    * –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ `–æ—Ç—Å—É—Å—Ç–≤—É–µ—Ç` –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Å—É–º–º–∞ –∏–ª–∏ –∏–≥—Ä–æ–∫ `–æ—Ç–∫–∞–∑–∞–ª—Å—è` –æ—Ç –ø–ª–∞—Ç—ã, –∏–≥—Ä–∞ `–∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è`.

### ‚öôÔ∏è–ù–∞—Å—Ç—Ä–æ–π–∫–∏
–í –Ω–∞—Å—Ç—Ä–æ–∫–∞—Ö –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏ –∏ –≥—Ä–æ–º–∫–æ—Å—Ç—å –∏–≥—Ä–æ–≤—ã—Ö –∑–≤—É–∫–æ–≤. –î–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### üìä–†–µ–∑—É–ª—å—Ç–∞—Ç—ã
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑–µ–ª—å—Ç–∞—Ç–∞—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤: ***–∏–º—è, —Å—á—ë—Ç, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç, –¥–∞—Ç—É –∏–≥—Ä—ã***.

### ‚è∏Ô∏è–ü–∞—É–∑–∞
–ò–≥—Ä—É –º–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É 2 —Å–ø–æ—Å–æ–±–∞–º–∏:
1. –ù–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É `Pause` –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –æ–∫–Ω–∞;
2. –ù–∞–∂–∞–≤ –∫–ª–∞–≤–∏—à—É `ESC`.

–í –º–µ–Ω—é –ø–∞—É–∑—ã –∏–º–µ–µ—Ç—Å—è 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞:
1. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É (`Resume`)
2. –í—ã–π—Ç–∏ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (`Exit`)


### üïπÔ∏è–ì–µ–π–º–ø–ª–µ–π

## üõ†Ô∏è–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ `–û–û–ü` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `LINQ`.
–•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π/–¥–∏—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ `JSON` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `Newtonsoft.Json`.

### üèóÔ∏è–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–µ—à–µ–Ω–∏—è:<br />
  
 ![image](https://github.com/IvanPovaliaev/RaceWinFormsApp/assets/157638990/b126ea81-2e7e-4ba7-9e3f-cd685a0db5a9)

### üé∂–†–∞–±–æ—Ç–∞ —Å–æ –∑–≤—É–∫–æ–º
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –∑–≤—É–∫–æ–º –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `NAudio`. –†–∞–±–æ—Ç–∞ —Å–æ –∑–≤—É–∫–æ–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ `AudioProvider`:
```csharp
public static class AudioProvider
{
    public async static Task PlayBGMAsync(string bgmDirectoryPath)
    {
        await Task.Run(() =>
        {
            var audioIndex = 0;
            var directoryInfo = new DirectoryInfo(bgmDirectoryPath);
            var audiosPaths = new List<string>();

            foreach (var file in directoryInfo.GetFiles("*.wav", SearchOption.TopDirectoryOnly))
                audiosPaths.Add(file.FullName.ToString());

            audiosPaths = audiosPaths.Shuffle().ToList();

            StaticData.BGMPlayer = new WaveOutEvent();
            
            var audioFileReader = new AudioFileReader(audiosPaths[0]);

            StaticData.BGMPlayer.Init(audioFileReader);
            StaticData.BGMPlayer.Volume = SystemSettings.BGMVolume / 100f;

            StaticData.BGMPlayer.DeviceNumber = 0;

            StaticData.BGMPlayer.PlaybackStopped += (sender, e) =>
            {
                audioFileReader.Dispose();

                if (audioIndex + 1 == audiosPaths.Count)
                {
                    audiosPaths = audiosPaths.Shuffle().ToList();
                    audioIndex = 0;
                }
                else audioIndex++;

                audioFileReader = new AudioFileReader(audiosPaths[audioIndex]);
                StaticData.BGMPlayer.Init(audioFileReader);
                StaticData.BGMPlayer.Play();
            };

            StaticData.BGMPlayer.Play();
        });
    }
    public async static Task PlaySoundAsync(string audiofilePath)
    {
        await Task.Run(() =>
        {
            var audioFileReader = new AudioFileReader(audiofilePath);
            var waveChannel = new WaveChannel32(audioFileReader);
            waveChannel.Volume = SystemSettings.SoundsVolume / 100f;

            var player = new DirectSoundOut();
            player.Init(waveChannel);
            player.Play();
            player.PlaybackStopped += (sender, e) =>
            {
                audioFileReader.Dispose();
                waveChannel.Dispose();
                player.Dispose();
            };
        });
    }
}
```

### üîê–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å `AESEncryptionProvider`. –î–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º `AES`.
```csharp
public static class AESEncryptionProvider
{
    private static string keysPath = @"aesKeys.dat";

    /// <summary>
    /// Encrypt string via AES algorithm
    /// </summary>
    public static string EncryptString(string originalString)
    {
        using (var aes = Aes.Create())
        {
            aes.Key = GetKeys(out var aesIV);
            aes.IV = aesIV;
            var encryptor = aes.CreateEncryptor(aes.Key, aes.IV);
            
            using (var msEncrypt = new MemoryStream())
            {
                using (var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                using (var swEncrypt = new StreamWriter(csEncrypt))
                {
                    swEncrypt.Write(originalString);
                }
                return Convert.ToBase64String(msEncrypt.ToArray());
            }
        }
    }
    /// <summary>
    /// Decrypt string via AES algorithm
    /// </summary>
    public static string DecryptString(string decryptedString)
    {
        var cipherText = Convert.FromBase64String(decryptedString);
        using (var aes = Aes.Create())
        {
            aes.Key = GetKeys(out var aesIV);
            aes.IV = aesIV;
            var decryptor = aes.CreateDecryptor(aes.Key, aes.IV);
            using (var msDecrypt = new MemoryStream(cipherText))
            using (var csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
            using (var reader = new StreamReader(csDecrypt))
            {
                return reader.ReadToEnd();
            }
        }
    }
    /// <summary>
    /// Get AES keys
    /// </summary>
    private static byte[] GetKeys(out byte[] aesIV)
    {
        byte[] aesKey;

        if (!FileProvider.Exists(keysPath))
        {
            using (var aes = Aes.Create())
            {
                aes.GenerateKey();
                aes.GenerateIV();

                aesKey = aes.Key;
                aesIV = aes.IV;

                FileProvider.Save(keysPath, $"{Convert.ToBase64String(aesKey)}\n{Convert.ToBase64String(aesIV)}");
            }
            return aesKey;
        }

        var aesFile = FileProvider.GetContent(keysPath).Split("\n");

        aesKey = Convert.FromBase64String(aesFile[0]);
        aesIV = Convert.FromBase64String(aesFile[1]);            
        return aesKey;
    }
}
```

### üîÑ–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–î–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö JSON-—Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å `JsonProvider`
```csharp
public static class JsonProvider
{
    public static List<T>? Deserialize<T>(string encryptedJsonData)
    {
        var decryptedJsonText = AESEncryptionProvider.DecryptString(encryptedJsonData);
        return JsonConvert.DeserializeObject<List<T>>(decryptedJsonText);
    }

    public static string Serialize<T>(List<T> values)
    {
        var jsonData = JsonConvert.SerializeObject(values, Formatting.Indented);
        return AESEncryptionProvider.EncryptString(jsonData);
    }
}
```
